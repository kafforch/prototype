"""
    Orchestrator facade to expose API:
"""


class Orchestrator:
    def __init__(self, plan_repo, plan_exec):
        self.__plan_repo = plan_repo
        self.__plan_exec = plan_exec

    def submit_plan_for_execution(self, plan_json):
        """
        Executes submitted plan.

        Algorithm:
            parse plan JSON
            save the plan and get back plan id
            trigger plan execution

        :param plan_json: json string describing a plan
        :return: plan_id: Autogenerated id of submitted plan
        """

        plan_id = self.__plan_repo.save_new_plan(plan_json)
        self.__plan_exec.execute_plan(plan_id)

        return plan_id
